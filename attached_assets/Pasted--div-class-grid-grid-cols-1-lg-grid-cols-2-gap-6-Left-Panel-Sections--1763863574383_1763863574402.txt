<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left Panel - Sections -->
            <div class="space-y-2 lg:space-y-4">
                <!-- Section Tip -->
                <div x-data="{ showSectionTip: true }" x-show="showSectionTip" class="bg-amber-50 border border-amber-200 rounded-lg px-3 py-2 flex items-center justify-between">
                    <p class="text-xs text-amber-700">
                        <span class="font-medium">Tip:</span> Click on the section name to expand/collapse
                    </p>
                    <button @click="showSectionTip = false" class="ml-2 text-amber-400 hover:text-amber-600 transition flex-shrink-0">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Sections Container (Sortable) -->
                <div x-ref="sectionsContainer" class="gap-2 flex flex-col space-y-2">
                    <template x-for="section in sections" :key="section.instanceId">
                        <div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'">üìä</span>
                                        <span x-show="section.type === 'items'">üõí</span>
                                        <span x-show="section.type === 'payment'">üí≥</span>
                                        <span x-show="section.type === 'customMessage'">üí¨</span>
                                        <span x-show="section.type === 'barcode'">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name"></span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'">üìä</span>
                                    <span x-show="section.type === 'items'">üõí</span>
                                    <span x-show="section.type === 'payment'">üí≥</span>
                                    <span x-show="section.type === 'customMessage'">üí¨</span>
                                    <span x-show="section.type === 'barcode'">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name"></span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div>
                    </template><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="9">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 opacity-35 cursor-not-allowed" disabled="disabled">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Settings</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Settings</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all opacity-30 cursor-not-allowed" disabled="disabled">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template><div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-blue-500 text-white border-blue-600" x-text="section.data.currencySymbol + '2.99'">$2.99</button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400" x-text="'2.99' + section.data.currencySymbol">2.99$</button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400" x-text="'2.99 ' + section.data.currencySymbol">2.99 $</button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-blue-500 text-white border-blue-600">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors bg-blue-500">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="10">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Header</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Header</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'">35%</span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-blue-500 text-white border-blue-600">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="11">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Date &amp; Time</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Date &amp; Time</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-blue-500 text-white border-blue-600">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="12">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Items list</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200 rotate-180" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all rotate-180" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Items list</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template><div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div><div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div><div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div><div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-blue-500 text-white">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="13">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Payment</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Payment</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all bg-neutral-50 border border-neutral-200">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all bg-white border-2 border-neutral-300 shadow-sm">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div><div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-blue-500 text-white">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="14">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Custom message</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Custom message</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-blue-500 text-white">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="15">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'">üí¨</span>
                                        <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Custom message</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'">üí¨</span>
                                    <span x-show="section.type === 'barcode'" style="display: none;">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Custom message</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template><div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-blue-500 text-white">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50 bg-neutral-100 text-neutral-700">***</button>
                                            </div>
                                        </div>
                                    </div>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template>
                                
                            </div>
                        </div><div :data-instance-id="section.instanceId" class="bg-white border border-neutral-200 sm:border-neutral-200/70 rounded-lg sm:rounded-lg lg:rounded-2xl overflow-hidden hover:border-neutral-300/80 hover:shadow-lg transition-all duration-300" data-instance-id="16">
                            
                            <!-- Desktop Section Header -->
                            <div class="hidden lg:flex items-center gap-4 px-6 py-3 bg-gradient-to-br from-neutral-50/80 via-white to-neutral-50/40 border-b border-neutral-150/50 hover:from-neutral-100/50 hover:via-white hover:to-neutral-50/60 transition-all duration-300">
                                <!-- Up/Down Reorder Controls (Vertical Stack) -->
                                <div class="flex flex-col items-center gap-1.5 px-3 py-2 rounded-xl border border-blue-200/50 bg-blue-50/60 hover:bg-blue-100/50 transition-colors duration-300 shadow-sm">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section up" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 text-blue-600 hover:text-blue-700 active:scale-110">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-35 cursor-not-allowed' : 'text-blue-600 hover:text-blue-700 active:scale-110'" title="Move section down" class="p-1.5 rounded-lg transition-all duration-150 leading-none hover:bg-blue-200/40 opacity-35 cursor-not-allowed" disabled="disabled">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Section Icon + Title (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex items-center gap-3 flex-1 cursor-pointer group">
                                    <!-- Emoji Icon -->
                                    <div class="text-2xl flex-shrink-0 group-hover:scale-110 transition-transform duration-200">
                                        <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                        <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                        <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                        <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                        <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                        <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                        <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                        <span x-show="section.type === 'barcode'">üè∑Ô∏è</span>
                                    </div>
                                    
                                    <!-- Title -->
                                    <span class="font-medium text-base text-neutral-900 flex-1 group-hover:text-neutral-950 transition-colors duration-150" x-text="getSectionTemplate(section.type).name">Barcode</span>
                                    
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 group-hover:text-neutral-600 transition-all duration-200" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 rounded-lg text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 transition-all duration-150 flex-shrink-0">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Mobile Section Header -->
                            <div class="lg:hidden flex items-center gap-3 px-4 py-3 bg-white border-b border-neutral-200/40 hover:bg-neutral-50 transition-colors">
                                <!-- Large Emoji Icon -->
                                <div class="text-2xl flex-shrink-0">
                                    <span x-show="section.type === 'settings'" style="display: none;">‚öôÔ∏è</span>
                                    <span x-show="section.type === 'header'" style="display: none;">üìÑ</span>
                                    <span x-show="section.type === 'dateTime'" style="display: none;">üìÖ</span>
                                    <span x-show="section.type === 'twoColumn'" style="display: none;">üìä</span>
                                    <span x-show="section.type === 'items'" style="display: none;">üõí</span>
                                    <span x-show="section.type === 'payment'" style="display: none;">üí≥</span>
                                    <span x-show="section.type === 'customMessage'" style="display: none;">üí¨</span>
                                    <span x-show="section.type === 'barcode'">üè∑Ô∏è</span>
                                </div>
                                
                                <!-- Section Title + Chevron (clickable to expand) -->
                                <div @click="toggleSection(section.instanceId)" class="flex-1 cursor-pointer group flex items-center gap-2">
                                    <!-- Chevron -->
                                    <svg class="w-5 h-5 text-neutral-400 flex-shrink-0 transition-all" :class="section.collapsed ? '' : 'rotate-180'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                    <span class="font-medium text-sm text-neutral-900 group-hover:text-neutral-950 transition-colors" x-text="getSectionTemplate(section.type).name">Barcode</span>
                                </div>
                                
                                <!-- Up/Down Arrows -->
                                <div class="flex items-center gap-1">
                                    <!-- Up Button -->
                                    <button @click.stop="moveSectionUp(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === 0 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section up" class="p-1 rounded transition-all text-neutral-600 hover:text-neutral-900">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 14l5-5 5 5z"></path>
                                        </svg>
                                    </button>
                                    <!-- Down Button -->
                                    <button @click.stop="moveSectionDown(section.instanceId)" :disabled="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1" :class="sections.findIndex(s =&gt; s.instanceId === section.instanceId) === sections.length - 1 ? 'opacity-30 cursor-not-allowed' : 'text-neutral-600 hover:text-neutral-900'" title="Move section down" class="p-1 rounded transition-all opacity-30 cursor-not-allowed" disabled="disabled">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M7 10l5 5 5-5z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Delete Button -->
                                <button @click.stop="removeSection(section.instanceId)" class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all flex-shrink-0">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Section Content -->
                            <div x-show="!section.collapsed" x-collapse="" class="px-6 py-4 border-t border-neutral-150/50 space-y-3 lg:space-y-4 bg-white/50" hidden="" style="display: none; height: 0px; overflow: hidden;">
                                
                                <!-- Settings Section Editor -->
                                <template x-if="section.type === 'settings'">
                                    <div class="space-y-5">
                                        <!-- Currency & Format Row -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Currency</label>
                                            <input x-model="section.data.currencySymbol" type="text" maxlength="5" placeholder="$" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" style="font-family: monospace;">
                                        </div>
                                        
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Format</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.currencyPosition = 'before'" :class="section.data.currencyPosition === 'before' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="section.data.currencySymbol + '2.99'"></button>
                                                <button @click="section.data.currencyPosition = 'after'" :class="section.data.currencyPosition === 'after' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99' + section.data.currencySymbol"></button>
                                                <button @click="section.data.currencyPosition = 'after-space'" :class="section.data.currencyPosition === 'after-space' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors" x-text="'2.99 ' + section.data.currencySymbol"></button>
                                            </div>
                                        </div>

                                        <!-- Font Selection -->
                                        <div>
                                            <label class="block text-xs font-semibold text-neutral-700 uppercase tracking-wide mb-3">Font</label>
                                            <div class="flex gap-2">
                                                <button @click="section.data.selectedFont = 'font-1'" :class="section.data.selectedFont === 'font-1' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 1</button>
                                                <button @click="section.data.selectedFont = 'font-2'" :class="section.data.selectedFont === 'font-2' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 2</button>
                                                <button @click="section.data.selectedFont = 'font-3'" :class="section.data.selectedFont === 'font-3' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-4 py-2.5 border rounded-lg text-sm font-mono transition-colors">Font 3</button>
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div class="flex items-center gap-3">
                                            <input type="color" x-model="section.data.textColor" class="w-16 h-12 border border-neutral-300 rounded-lg cursor-pointer hover:border-neutral-400 transition-colors">
                                            <label class="text-sm font-medium text-neutral-900">Text color</label>
                                        </div>

                                        <!-- Background Toggle -->
                                        <div class="flex items-center gap-3 pt-2 border-t border-neutral-200">
                                            <button @click="section.data.showBackground = !section.data.showBackground" :class="section.data.showBackground ? 'bg-blue-500' : 'bg-neutral-300'" class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors">
                                                <span :class="section.data.showBackground ? 'translate-x-6' : 'translate-x-1'" class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"></span>
                                            </button>
                                            <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show receipt background</label>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Header Section Editor -->
                                <template x-if="section.type === 'header'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo</label>
                                            <input type="file" @change="uploadLogo(section.instanceId, $event)" accept="image/*" class="w-full text-sm px-4 py-3 border border-neutral-300 rounded-lg bg-white hover:border-neutral-400 transition-colors cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Logo Size (%)</label>
                                            <input type="range" x-model="section.data.logoSize" min="10" max="200" class="w-full h-2 rounded-lg appearance-none bg-gradient-to-r from-blue-200 to-blue-300 cursor-pointer" style="accent-color: rgb(37, 99, 235)">
                                            <span class="text-sm text-neutral-600 mt-2 block font-medium" x-text="section.data.logoSize + '%'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Business Name</label>
                                            <textarea x-model="section.data.businessName" rows="3" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.headerAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showHeaderDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.headerDivider = '---'" :class="section.data.headerDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.headerDivider = '==='" :class="section.data.headerDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.headerDivider = '...'" :class="section.data.headerDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.headerDivider = ':::'" :class="section.data.headerDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.headerDivider = '***'" :class="section.data.headerDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Editor -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="space-y-4 lg:space-y-5">
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Date &amp; Time</label>
                                            <input type="text" x-model="section.data.dateTime" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-colors" placeholder="11/11/2025, 3:04:14 PM">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-neutral-900 mb-2.5">Alignment</label>
                                            <select x-model="section.data.dateAlignment" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm bg-white hover:border-neutral-400 transition-colors">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="space-y-3 lg:space-y-4 pt-2 border-t border-neutral-200">
                                            <div class="flex items-center gap-3 pt-2">
                                                <input type="checkbox" x-model="section.data.showDateDivider" class="w-5 h-5 rounded accent-blue-600 cursor-pointer">
                                                <label class="text-sm font-medium text-neutral-900 cursor-pointer">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.dateDivider = '---'" :class="section.data.dateDivider === '---' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">---</button>
                                                <button @click="section.data.dateDivider = '==='" :class="section.data.dateDivider === '===' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">===</button>
                                                <button @click="section.data.dateDivider = '...'" :class="section.data.dateDivider === '...' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">...</button>
                                                <button @click="section.data.dateDivider = ':::'" :class="section.data.dateDivider === ':::' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">:::</button>
                                                <button @click="section.data.dateDivider = '***'" :class="section.data.dateDivider === '***' ? 'bg-blue-500 text-white border-blue-600' : 'bg-white text-neutral-700 border-neutral-300 hover:border-neutral-400'" class="flex-1 px-3 py-2.5 border rounded-lg text-sm font-mono transition-colors">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Editor -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 1</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 1)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 1)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                            <div>
                                                <label class="text-xs font-medium text-neutral-600 mb-2 block">Column 2</label>
                                                <template x-for="(field, idx) in section.data.customFields.filter(f =&gt; f.column === 2)" :key="idx">
                                                    <div class="flex gap-1 lg:gap-2 mb-2">
                                                        <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <input type="text" x-model="field.value" placeholder="Value" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                        <button @click="removeCustomField(section.instanceId, section.data.customFields.indexOf(field))" class="text-red-500 hover:bg-red-50 px-2 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                    </div>
                                                </template>
                                                <button @click="addCustomField(section.instanceId, 2)" class="text-blue-600 text-xs hover:underline">+ Add field</button>
                                            </div>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showInfoDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.infoDivider = '---'" :class="section.data.infoDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.infoDivider = '==='" :class="section.data.infoDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.infoDivider = '...'" :class="section.data.infoDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.infoDivider = ':::'" :class="section.data.infoDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.infoDivider = '***'" :class="section.data.infoDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Items List Section Editor -->
                                <template x-if="section.type === 'items'">
                                    <div class="space-y-1 lg:space-y-2">
                                        <template x-for="(item, idx) in section.data.items" :key="item.id">
                                            <div class="flex gap-1 lg:gap-2">
                                                <input type="number" x-model="item.quantity" min="0" max="999" class="w-12 lg:w-16 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Qty">
                                                <input type="text" x-model="item.name" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="Item">
                                                <input type="number" x-model="item.price" step="0.01" min="0" max="999999" class="w-16 lg:w-20 px-1 lg:px-2 py-1 border rounded text-sm" placeholder="$">
                                                <button @click="removeItem(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                            </div>
                                        </template>
                                        <button @click="addItem(section.instanceId)" class="text-blue-600 text-sm hover:underline">+ Add Item</button>
                                        <div class="mt-3 pt-3 border-t space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showItemsDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.itemsDivider = '---'" :class="section.data.itemsDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.itemsDivider = '==='" :class="section.data.itemsDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.itemsDivider = '...'" :class="section.data.itemsDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.itemsDivider = ':::'" :class="section.data.itemsDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.itemsDivider = '***'" :class="section.data.itemsDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Editor -->
                                <template x-if="section.type === 'payment'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <!-- Cash/Card Tabs -->
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <button @click="section.data.paymentType = 'cash'" :class="section.data.paymentType === 'cash' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Cash
                                            </button>
                                            <button @click="section.data.paymentType = 'card'" :class="section.data.paymentType === 'card' ? 'bg-white border-2 border-neutral-300 shadow-sm' : 'bg-neutral-50 border border-neutral-200'" class="px-4 py-3 rounded-lg text-sm font-medium text-neutral-700 hover:bg-white transition-all">
                                                Card
                                            </button>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Rate (%)</label>
                                            <input type="number" x-model="section.data.taxRate" step="0.1" min="0" max="100" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="block text-sm font-medium text-neutral-700">Title</label>
                                                <label class="block text-sm font-medium text-neutral-700">Value</label>
                                            </div>
                                            <template x-for="(field, idx) in section.data.paymentFields" :key="idx">
                                                <div class="flex gap-1 lg:gap-2 mb-2">
                                                    <input type="text" x-model="field.label" placeholder="Label" class="flex-1 min-w-0 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="field.value" placeholder="Value" class="w-20 lg:w-24 px-1 lg:px-2 py-1 border rounded text-sm">
                                                    <button @click="removePaymentField(section.instanceId, idx)" class="text-red-500 hover:bg-red-50 px-2 lg:px-3 py-1 rounded shrink-0 text-lg lg:text-xl touch-manipulation">√ó</button>
                                                </div>
                                            </template>
                                            <button @click="addPaymentField(section.instanceId)" class="text-blue-600 text-sm hover:underline inline-flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                                </svg>
                                                Add line
                                            </button>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showPaymentDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.paymentDivider = '---'" :class="section.data.paymentDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.paymentDivider = '==='" :class="section.data.paymentDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.paymentDivider = '...'" :class="section.data.paymentDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.paymentDivider = ':::'" :class="section.data.paymentDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.paymentDivider = '***'" :class="section.data.paymentDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Editor -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Message</label>
                                            <textarea x-model="section.data.customMessage" rows="3" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm" placeholder="THANK YOU\nHAVE A NICE DAY"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Alignment</label>
                                            <select x-model="section.data.messageAlignment" class="w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm">
                                                <option value="left">Left</option>
                                                <option value="center">Center</option>
                                                <option value="right">Right</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.messageBold" class="rounded">
                                            <label class="text-sm text-neutral-700">Bold text</label>
                                        </div>
                                        <div class="space-y-1.5 lg:space-y-2">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" x-model="section.data.showMessageDivider" class="rounded">
                                                <label class="text-sm text-neutral-700">Show divider</label>
                                            </div>
                                            <div class="flex gap-2">
                                                <button @click="section.data.messageDivider = '---'" :class="section.data.messageDivider === '---' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">---</button>
                                                <button @click="section.data.messageDivider = '==='" :class="section.data.messageDivider === '===' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">===</button>
                                                <button @click="section.data.messageDivider = '...'" :class="section.data.messageDivider === '...' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">...</button>
                                                <button @click="section.data.messageDivider = ':::'" :class="section.data.messageDivider === ':::' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">:::</button>
                                                <button @click="section.data.messageDivider = '***'" :class="section.data.messageDivider === '***' ? 'bg-blue-500 text-white' : 'bg-neutral-100 text-neutral-700'" class="flex-1 px-3 py-2 border rounded-lg text-sm font-mono hover:bg-blue-50">***</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Editor -->
                                <template x-if="section.type === 'barcode'">
                                    <div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'"></span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength"></span>
                                        </div>
                                    </div>
                                </template><div class="space-y-1.5 lg:space-y-2">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" x-model="section.data.barcodeEnabled" class="rounded">
                                            <label class="text-sm text-neutral-700">Show barcode</label>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Height (px)</label>
                                            <input type="range" x-model="section.data.barcodeSize" min="20" max="100" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeSize + 'px'">50px</span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-neutral-700 mb-1">Barcode Length</label>
                                            <input type="range" x-model="section.data.barcodeLength" min="10" max="100" step="10" class="w-full">
                                            <span class="text-xs text-neutral-500" x-text="section.data.barcodeLength">50</span>
                                        </div>
                                    </div>
                                
                            </div>
                        </div>
                </div>
                
                <!-- Add Section Button -->
                <button @click="addSectionModalOpen = true" class="w-full py-3 lg:py-4 border-2 border-dashed border-blue-300 rounded-xl text-blue-600 hover:border-blue-500 hover:bg-blue-50 transition font-medium text-sm">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add Section
                </button>
                
                <!-- Mobile Title & Action Buttons (only visible on mobile) -->
                <div class="lg:hidden mt-4 space-y-3">
                    <!-- Receipt Title -->
                    <h2 class="text-2xl font-bold text-neutral-900 text-center">
                        Advanced Receipt Generator
                    </h2>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-2">
                        <!-- Save Template Button (Full Width) -->
                        <button @click="handleSaveTemplate()" class="w-full py-3 border-2 border-neutral-300 text-neutral-700 rounded-xl hover:bg-neutral-50 transition font-medium flex items-center justify-center gap-2 text-sm touch-manipulation">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                            </svg>
                            Save it as a template
                        </button>
                        
                        <!-- Reset Button (Full Width) -->
                        <button @click="resetForm()" class="w-full py-3 border-2 border-red-300 text-red-600 rounded-xl hover:bg-red-50 transition font-medium flex items-center justify-center gap-2 text-sm touch-manipulation">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            Reset
                        </button>
                        
                        <!-- Remove Watermark + Download Buttons (Side by Side) -->
                        <div class="grid grid-cols-2 gap-2">
                            
                            <button @click="handleRemoveWatermark()" class="py-3 px-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition font-semibold flex items-center justify-center gap-1.5 text-sm shadow-md touch-manipulation">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                                </svg>
                                Remove watermark
                            </button>
                            
                            
                            <button @click="downloadReceipt()" class="py-3 px-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition font-semibold flex items-center justify-center gap-1.5 text-sm shadow-md touch-manipulation">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Panel - Preview -->
            <div class="block lg:sticky lg:top-4">
                <!-- Mobile Preview Label -->
                <div class="lg:hidden mb-3 text-sm font-semibold text-neutral-700">Preview:</div>
                <div class="bg-neutral-100 rounded-xl p-8">
                    <div id="receipt-preview" class="receipt-paper max-w-md mx-auto bg-white p-8 shadow-lg text-sm relative font-1" :class="sections.find(s =&gt; s.type === 'settings')?.data.selectedFont || 'font-1'" :style="`color: ${sections.find(s =&gt; s.type === 'settings')?.data.textColor || '#000000'}`" style="color: #000000">
                        <!-- Text-only Watermark Overlay -->
                        
                        <div class="watermark-overlay">
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                            <div class="watermark-text">RECEIPTMAKE</div>
                        </div>
                        
                        
                        <!-- Render sections in order -->
                        <template x-for="section in sections" :key="section.instanceId">
                            <div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div>
                        </template><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template><div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template><div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`" class="flex justify-center">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgdmlld0JveD0iMCAwIDgwIDgwIj48Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzNSIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNFPC90ZXh0Pjwvc3ZnPg==" style="width: 35%;">
                                            </div>
                                        <div class="text-base font-bold whitespace-pre-line text-center" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName">STORE EXPRESS</div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template><div class="mt-2" x-text="getDivider(section.data.headerDivider)">--------------------------------</div>
                                    </div>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template><div class="mb-3 text-center" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime">11/23/2025, 09:01:34 AM</div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template><div class="mt-2" x-text="getDivider(section.data.dateDivider)">--------------------------------</div>
                                    </div>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template><div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template><div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'" style="flex: 1;">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '">2 </span><span x-text="item.name">Wireless Mouse</span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;">$24.99</span>
                                            </div><div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'" style="flex: 1;">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '" style="display: none;">1 </span><span x-text="item.name">USB-C Cable (6ft)</span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;">$12.99</span>
                                            </div><div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'" style="flex: 1;">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '" style="display: none;">1 </span><span x-text="item.name">Phone Screen Protector</span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;">$9.99</span>
                                            </div><div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'" style="flex: 1;">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '">3 </span><span x-text="item.name">AA Batteries (4-pack)</span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;">$8.99</span>
                                            </div>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template><div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)">--------------------------------</div>
                                    </div>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template><div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template><div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)">--------------------------------</div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;">$99.93</span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate">8.5</span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;">$8.49</span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;">$108.42</span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template><template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Card number</span>
                                                    <span x-text="field.value" style="text-align: right;">**** **** **** 4922</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Card type</span>
                                                    <span x-text="field.value" style="text-align: right;">Debit</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Card entry</span>
                                                    <span x-text="field.value" style="text-align: right;">Chip</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Transaction #</span>
                                                    <span x-text="field.value" style="text-align: right;">458721</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Cashier</span>
                                                    <span x-text="field.value" style="text-align: right;">Sarah M.</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Register</span>
                                                    <span x-text="field.value" style="text-align: right;">03</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">REWARDS MEMBER</span>
                                                    <span x-text="field.value" style="text-align: right;">#SE892341</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Points earned</span>
                                                    <span x-text="field.value" style="text-align: right;">45</span>
                                                </div><div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label">Total points</span>
                                                    <span x-text="field.value" style="text-align: right;">1,245</span>
                                                </div>
                                    </div>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template><div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`" style="text-align: center">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`" style="line-height: 1.15; font-weight: normal">Thank you for shopping with us!

Returns accepted within 30 days with receipt.
For assistance, call us at (555) 123-4567</div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template><div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`" style="text-align: center">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`" style="line-height: 1.15; font-weight: normal">Visit us online at StoreExpress.com for exclusive deals!

Sign up for our rewards program and earn 1 point per dollar spent. New members get 500 bonus points!

Join our email list for 10% off your next purchase.

Follow us @StoreExpress on social media for daily deals, giveaways, and special promotions.

Shop with confidence - 100% satisfaction guaranteed or your money back.</div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template>
                                
                            </div><div>
                                <!-- Header Section Preview -->
                                <template x-if="section.type === 'header'">
                                    <div class="mb-4">
                                        <template x-if="section.data.logoUrl">
                                            <div :class="`flex ${section.data.headerAlignment === 'left' ? 'justify-start' : section.data.headerAlignment === 'right' ? 'justify-end' : 'justify-center'}`">
                                                <img :src="section.data.logoUrl" :style="`width: ${section.data.logoSize}%;`" class="mb-2">
                                            </div>
                                        </template>
                                        <div class="text-base font-bold whitespace-pre-line" :class="section.data.headerAlignment === 'left' ? 'text-left' : section.data.headerAlignment === 'right' ? 'text-right' : 'text-center'" x-text="section.data.businessName"></div>
                                        <template x-if="section.data.showHeaderDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.headerDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Date & Time Section Preview -->
                                <template x-if="section.type === 'dateTime'">
                                    <div class="mb-3" :class="section.data.dateAlignment === 'left' ? 'text-left' : section.data.dateAlignment === 'right' ? 'text-right' : 'text-center'">
                                        <div x-text="section.data.dateTime"></div>
                                        <template x-if="section.data.showDateDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.dateDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Two Column Information Section Preview -->
                                <template x-if="section.type === 'twoColumn'">
                                    <div class="mb-3">
                                        <div class="grid grid-cols-2 gap-8">
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 1)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                            <div>
                                                <template x-for="field in section.data.customFields.filter(f =&gt; f.column === 2)">
                                                    <div class="flex justify-between mb-1">
                                                        <span x-text="field.label"></span>
                                                        <span x-text="field.value"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <template x-if="section.data.showInfoDivider">
                                            <div class="mt-2" x-text="getDivider(section.data.infoDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Items Section Preview -->
                                <template x-if="section.type === 'items'">
                                    <div class="mb-2">
                                        <template x-for="(item, itemIdx) in section.data.items" :key="`item-${section.instanceId}-${itemIdx}`">
                                            <div class="flex justify-between" style="margin-bottom: 1px;">
                                                <span :style="item.indent ? 'padding-left: 8px; flex: 1;' : 'flex: 1;'">
                                                    <span x-show="item.quantity &amp;&amp; parseInt(item.quantity) &gt; 1" x-text="parseInt(item.quantity) + ' '"></span><span x-text="item.name"></span>
                                                </span>
                                                <span x-text="formatCurrency(parseFloat(item.price) || 0)" style="text-align: right; white-space: nowrap;"></span>
                                            </div>
                                        </template>
                                        <template x-if="section.data.showItemsDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.itemsDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Payment Section Preview (with totals) -->
                                <template x-if="section.type === 'payment'">
                                    <div class="mb-2">
                                        <template x-if="section.data.showPaymentDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.paymentDivider)"></div>
                                        </template>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Subtotal</span>
                                            <span x-text="section.data.subtotal ? formatCurrency(parseFloat(section.data.subtotal)) : formatCurrency(subtotal)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between" style="margin-bottom: 1px;">
                                            <span>Tax (<span x-text="section.data.taxRate"></span>%)</span>
                                            <span x-text="section.data.tax ? formatCurrency(parseFloat(section.data.tax)) : formatCurrency(tax)" style="text-align: right;"></span>
                                        </div>
                                        <div class="flex justify-between font-bold" style="margin-top: 2px; margin-bottom: 1px; font-size: 11px;">
                                            <span>TOTAL</span>
                                            <span x-text="section.data.total ? formatCurrency(parseFloat(section.data.total)) : formatCurrency(total)" style="text-align: right;"></span>
                                        </div>
                                        <template x-if="section.data.paymentFields &amp;&amp; section.data.paymentFields.length &gt; 0">
                                            <template x-for="field in section.data.paymentFields" :key="field.label">
                                                <div class="flex justify-between" style="margin-top: 3px; margin-bottom: 1px;">
                                                    <span x-text="field.label"></span>
                                                    <span x-text="field.value" style="text-align: right;"></span>
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Custom Message Section Preview -->
                                <template x-if="section.type === 'customMessage'">
                                    <div class="mb-2" :style="`text-align: ${section.data.messageAlignment}`">
                                        <div class="whitespace-pre-line" x-text="section.data.messageText || section.data.customMessage" :style="`line-height: 1.15; font-weight: ${section.data.messageBold ? 'bold' : 'normal'}`"></div>
                                        <template x-if="section.data.showMessageDivider &amp;&amp; section.data.messageDivider">
                                            <div style="margin: 3px 0;" x-text="getDivider(section.data.messageDivider)"></div>
                                        </template>
                                    </div>
                                </template>
                                
                                <!-- Barcode Section Preview -->
                                <template x-if="section.type === 'barcode' &amp;&amp; section.data.barcodeEnabled">
                                    <div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)"></div>
                                    </div>
                                </template><div class="mb-3">
                                        <div class="barcode" :style="`height: ${section.data.barcodeSize}px`" style="height: 50px"></div>
                                        <div class="text-center text-xs mt-1" x-text="getBarcodeValue(section)">458721</div>
                                    </div>
                                
                            </div>
                    </div>
                </div>
            </div>
        </div>